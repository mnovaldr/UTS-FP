{% extends 'perpustakaan/base.html' %}

{% block title %}Detail Buku - {{ buku.judul }}{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 2rem;">
        <div>
            <h1>Detail Buku</h1>
            <p style="color: #718096; margin-top: 0.5rem;">Informasi lengkap buku perpustakaan</p>
        </div>
        <div>
            <a href="{% url 'buku-edit' buku.pk %}" class="btn btn-warning">Edit</a>
            <a href="{% url 'buku-hapus' buku.pk %}" class="btn btn-danger">Hapus</a>
            <a href="{% url 'buku-list' %}" class="btn btn-primary">Kembali</a>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
        <div>
            <h3 style="margin-bottom: 1rem; color: #2d3748;">Informasi Buku</h3>
            
            <div style="margin-bottom: 1rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.25rem;">Judul</label>
                <div id="d-judul" style="padding: 0.75rem; background: #f8fafc; border-radius: 6px;">Loading...</div>
            </div>

            <div style="margin-bottom: 1rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.25rem;">Penulis</label>
                <div id="d-penulis" style="padding: 0.75rem; background: #f8fafc; border-radius: 6px;">Loading...</div>
            </div>

            <div style="margin-bottom: 1rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.25rem;">Kategori</label>
                <div id="d-kategori" style="padding: 0.75rem; background: #f8fafc; border-radius: 6px;">
                    Loading...
                </div>
            </div>
        </div>

        <div>
            <h3 style="margin-bottom: 1rem; color: #2d3748;">Informasi Penerbit</h3>

            <div style="margin-bottom: 1rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.25rem;">Tahun Terbit</label>
                <div id="d-tahun" style="padding: 0.75rem; background: #f8fafc; border-radius: 6px;">Loading...</div>
            </div>

            <div style="margin-bottom: 1rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.25rem;">Penerbit</label>
                <div id="d-penerbit" style="padding: 0.75rem; background: #f8fafc; border-radius: 6px;">Loading...</div>
            </div>

            <div style="margin-bottom: 1rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.25rem;">ISBN</label>
                <div id="d-isbn" style="padding: 0.75rem; background: #f8fafc; border-radius: 6px; font-family: monospace;">Loading...</div>
            </div>

            <div style="margin-bottom: 1rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.25rem;">Stok Tersedia</label>
                <div id="d-stok" style="padding: 0.75rem; background: #f8fafc; border-radius: 6px;">
                    Loading...
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    fetch(`/api/buku/{{ buku.id }}/`).then(r=>r.json()).then(d=>{
        document.getElementById('d-judul').textContent = d.judul;
        document.getElementById('d-penulis').textContent = d.penulis;
        document.getElementById('d-kategori').textContent = d.kategori_display || d.kategori;
        document.getElementById('d-tahun').textContent = d.tahun_terbit;
        document.getElementById('d-penerbit').textContent = d.penerbit;
        document.getElementById('d-isbn').textContent = d.isbn;
        
        const stokEl = document.getElementById('d-stok');
        stokEl.textContent = d.stok + ' buku';
        stokEl.style.color = d.stok > 0 ? '#38a169' : '#e53e3e';
        stokEl.style.fontWeight = '600';
    });
</script>
{% endblock %}